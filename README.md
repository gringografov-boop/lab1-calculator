# Python. –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞: –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä

### –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º "–®—É–Ω—Ç–∏—Ä—É—é—â–∏–π –¥–≤–æ—Ä"

**–ê–≤—Ç–æ—Ä:** –ì—Ä–∞—Ñ–æ–≤ –ì—Ä–∏–≥–æ—Ä–∏–π  
**–ì—Ä—É–ø–ø–∞:** –ú80-103–ë–í-25  
**–î–∞—Ç–∞:** –û–∫—Ç—è–±—Ä—å 2025

---

## üìù –û–ø–∏—Å–∞–Ω–∏–µ

–†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–∞—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º–∞ **"–®—É–Ω—Ç–∏—Ä—É—é—â–∏–π –¥–≤–æ—Ä"** –≠–¥—Å–≥–µ—Ä–∞ –î–µ–π–∫—Å—Ç—Ä—ã –¥–ª—è –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏—è –∏–Ω—Ñ–∏–∫—Å–Ω–æ–π –∑–∞–ø–∏—Å–∏ –≤ –æ–±—Ä–∞—Ç–Ω—É—é –ø–æ–ª—å—Å–∫—É—é –Ω–æ—Ç–∞—Ü–∏—é (RPN).

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã:
- **–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ:** `+`, `-`, `*`, `/`, `**`, `//`, `%`
- **–£–Ω–∞—Ä–Ω—ã–µ:** `+`, `-` 
- **–°–∫–æ–±–∫–∏:** `()`

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤
- ‚úÖ –ü—Ä–∞–≤–∞—è –∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–æ—Å—Ç—å —Å—Ç–µ–ø–µ–Ω–∏ (`2**3**2 = 512`)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –¥—Ä–æ–±–Ω—ã—Ö —á–∏—Å–µ–ª (–≤–∫–ª—é—á–∞—è `.5`)
- ‚úÖ –¢–æ—á–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –æ—à–∏–±–æ–∫ —Å —É—á–µ—Ç–æ–º –ø—Ä–æ–±–µ–ª–æ–≤
- ‚úÖ –ö–æ–º–ø–∞–∫—Ç–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
project/
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py              
‚îÇ   ‚îú‚îÄ‚îÄ calculator.py            # –û—Å–Ω–æ–≤–Ω–æ–π –∫–ª–∞—Å—Å Calculator
‚îÇ   ‚îî‚îÄ‚îÄ user.py                  # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–π –∫–ª–∞—Å—Å User
‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py             
‚îÇ   ‚îú‚îÄ‚îÄ conftest.py             # –§–∏–∫—Å—Ç—É—Ä—ã pytest
‚îÇ   ‚îú‚îÄ‚îÄ test_calculator.py      # –¢–µ—Å—Ç—ã –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞
‚îÇ   ‚îî‚îÄ‚îÄ test_user.py            # –¢–µ—Å—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
‚îú‚îÄ‚îÄ main.py                     # –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã
‚îú‚îÄ‚îÄ pytest.ini                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è pytest
‚îú‚îÄ‚îÄ requirements.txt            # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ README.md                   # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞:
```bash
pip install -r requirements.txt
```

### –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
pytest
pytest -v  # –ø–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
```

### –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≥—Ä–∞–º–º—ã:
```bash
python main.py
```

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–∞–∫ –º–æ–¥—É–ª—å:
```python
from src.calculator import Calculator

calc = Calculator()
result = calc.calculate("2 + 3 * 4")
print(result)  # 14.0
```

---

## üí° –ü—Ä–∏–º–µ—Ä—ã

```python
calc = Calculator()

# –ë–∞–∑–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
calc.calculate("2 + 3 * 4")        # ‚Üí 14.0
calc.calculate("(2 + 3) * 4")      # ‚Üí 20.0
calc.calculate("2 ** 3 ** 2")      # ‚Üí 512.0

# –£–Ω–∞—Ä–Ω—ã–µ –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
calc.calculate("-5 + 3")           # ‚Üí -2.0
calc.calculate("+5")               # ‚Üí 5.0

# –î—Ä–æ–±–Ω—ã–µ —á–∏—Å–ª–∞
calc.calculate(".5 + 1.5")         # ‚Üí 2.0
calc.calculate("3.14 * 2")         # ‚Üí 6.28

# M2 –æ–ø–µ—Ä–∞—Ç–æ—Ä—ã
calc.calculate("17 // 5")          # ‚Üí 3.0
calc.calculate("17 % 5")           # ‚Üí 2.0
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:
```python
calc.calculate("5 / 0")            # ‚Üí ZeroDivisionError
calc.calculate("1 —Ñ + 1")          # ‚Üí ValueError: –ø–æ–∑–∏—Ü–∏—è 2: '—Ñ'
calc.calculate("((2+3)")           # ‚Üí ValueError: –ù–µ—Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–∫–æ–±–∫–∏
```

---

## üßÆ –ê–ª–≥–æ—Ä–∏—Ç–º

### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç—ã (–ø–æ —É–±—ã–≤–∞–Ω–∏—é):
1. **–£–Ω–∞—Ä–Ω—ã–µ** `+`, `-` (4)
2. **–°—Ç–µ–ø–µ–Ω—å** `**` (3, –ø—Ä–∞–≤–æ–∞—Å—Å–æ—Ü–∏–∞—Ç–∏–≤–Ω–∞—è) 
3. **–£–º–Ω–æ–∂–µ–Ω–∏–µ/–¥–µ–ª–µ–Ω–∏–µ** `*`, `/`, `//`, `%` (2)
4. **–°–ª–æ–∂–µ–Ω–∏–µ/–≤—ã—á–∏—Ç–∞–Ω–∏–µ** `+`, `-` (1)

### –≠—Ç–∞–ø—ã:
1. **–¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è** - —Ä–∞–∑–±–æ—Ä —Å—Ç—Ä–æ–∫–∏ —Ä–µ–≥—É–ª—è—Ä–∫–æ–π
2. **–ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –≤ RPN** - –∞–ª–≥–æ—Ä–∏—Ç–º –î–µ–π–∫—Å—Ç—Ä—ã  
3. **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ RPN** - —Å—Ç–µ–∫–æ–≤–∞—è –º–∞—à–∏–Ω–∞

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
- **50+ —Ç–µ—Å—Ç–æ–≤** –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
- **–ü–æ–∫—Ä—ã—Ç–∏–µ edge cases** –∏ –æ—à–∏–±–æ–∫
- **–ü–∞—Ä–∞–º–µ—Ç—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã**

### –ü—Ä–∏–º–µ—Ä—ã —Ç–µ—Å—Ç–æ–≤:
```python
def test_precedence(self):
    assert self.calc.calculate("2 + 3 * 4") == 14.0

def test_right_associativity(self):
    assert self.calc.calculate("2 ** 3 ** 2") == 512.0

def test_error_position(self):
    with pytest.raises(ValueError) as exc:
        self.calc.calculate("1 —Ñ + 1")
    assert "–ø–æ–∑–∏—Ü–∏–∏ 2" in str(exc.value)
```

---

## üîß –ö–ª—é—á–µ–≤—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞

### –¢–æ–∫–µ–Ω–∏–∑–∞—Ü–∏—è —Å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–º–∏ –≤—ã—Ä–∞–∂–µ–Ω–∏—è–º–∏:
```python
pattern = re.compile(r'(?P<number>\d*\.\d+|\d+)|(?P<op>\*\*|//|[+\-*/%()])')
```

### –¢–æ—á–Ω–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –æ—à–∏–±–æ–∫:
```python
expr_nospace = ''.join(ch for ch in expr if ch != ' ')
index_map = [i for i, ch in enumerate(expr) if ch != ' ']
```

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —É–Ω–∞—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ç–æ—Ä–æ–≤:
```python
if t == 'OP' and v in '+-' and (i == 0 or out and out[-1][0] in ['OP', 'LPAREN']):
    out.append(('UNARY', 'unary'+v))
```

---

## üìä –ß—Ç–æ –∏–∑—É—á–µ–Ω–æ

- **–ê–ª–≥–æ—Ä–∏—Ç–º "–®—É–Ω—Ç–∏—Ä—É—é—â–∏–π –¥–≤–æ—Ä"** –î–µ–π–∫—Å—Ç—Ä—ã
- **–û–±—Ä–∞—Ç–Ω–∞—è –ø–æ–ª—å—Å–∫–∞—è –Ω–æ—Ç–∞—Ü–∏—è** –∏ —Å—Ç–µ–∫–æ–≤—ã–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- **–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è** –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞
- **Pytest** –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞** –Ω–∞ Python

---
